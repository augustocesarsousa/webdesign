<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Task list</title>
        <meta charset="utf-8">
        <meta name="author" content="Augusto Cesar">
        <meta name="description" content="exercise task list">
        <meta name="keywords" content="HTML, CSS3, Javascript">
        
        <style>
            .done{
                text-decoration: line-through;
                color: #ccc;
            }
        </style>        
    </head>
    <body>
        <h1>Task List</h1>

        <input type="text" id="txtTask">
        <button id="addTask">Add task</button>
        
        <ul id="taskList">
            <li>Study HTML</li>
            <li>Wash the dishes</li>
            <li>Clean the bathroom</li>
        </ul>

        <script>
            (function(){
                "use strict";
                
                var $txtTask = document.getElementById("txtTask");
                var $addTask = document.getElementById("addTask");
                var $taskList = document.getElementById("taskList");
                var $taskListItem = $taskList.querySelectorAll("li");

                $addTask.addEventListener("click", addTaskOnList);
                $txtTask.addEventListener("keyup", checkKey);
                $taskList.addEventListener("click", addEvent)
                
                function addEvent(e){
                    if(e.target.nodeName === "LI"){
                        removeTask(e.target);
                    }
                }

                function checkKey(e){
                    if(e.keyCode === 13){
                        addTaskOnList();
                    }
                }

                function addTaskOnList(){
                    var li = document.createElement("li");
                    var text = document.createTextNode($txtTask.value);

                    li.appendChild(text);
                    $taskList.appendChild(li);
                    cleanTxtTask();                    
                }

                function removeTask(li){
                    if(confirm("Would you like to remove the task ("+li.textContent+")?")){
                        li.parentNode.removeChild(li);
                    }
                }

                function cleanTxtTask(){
                    $txtTask.value = "";
                    $txtTask.focus();
                }
            })();
        </script>
    </body>
</html>